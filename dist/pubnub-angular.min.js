angular.module("pubnub.angular.service",[]).factory("Pubnub",["$rootScope",function(a){
function b(a){this.label=a,this.pubnubInstance=null}function c(a){return"undefined"!=typeof a&&null!==a;

}function d(a){return"object"==typeof a&&null!==a}function e(a){return"function"==typeof a;

}function f(a,b){var c,e,f,g=a.triggerEvents,h=[];if(g===!0)return b;if(d(g)){for(c=g.length,
f=0;c>f;f++)e=g[f],b.indexOf(e)>=0&&h.push(e);return h}return[]}function g(b,c,f,g){
var h,i,k=g.length,l={};for(i=0;k>i;i++){if(h=g[i],!d(f))return;l[h]=f[h],function(d){
f[h]=function(){if(a.$broadcast.bind.apply(a.$broadcast,[a,j.getEventNameFor(c,d,b)].concat(Array.prototype.slice.call(arguments)))(),
d in l&&e(l[d])&&l[d].apply(null,arguments),"subscribe"===c)switch(d){case"callback":
a.$broadcast.bind.apply(a.$broadcast,[a,j.getMessageEventNameFor(arguments[2],b)].concat(Array.prototype.slice.call(arguments)))();

break;case"presence":a.$broadcast.bind.apply(a.$broadcast,[a,j.getPresenceEventNameFor(arguments[2],b)].concat(Array.prototype.slice.call(arguments)))();

}}}(h)}}if(!c(PUBNUB))throw new Error("PUBNUB is not in global scope. Ensure that pubnub.js file is included before pubnub-angular.js");

var h,i={pubnub_prefix:"pubnub",default_instance_name:"default",methods_to_delegate:["history","replay","publish","unsubscribe","here_now","grant","revoke","audit","time","where_now","state","channel_group","channel_group_list_channels","channel_group_list_groups","channel_group_list_namespaces","channel_group_remove_channel","channel_group_remove_group","channel_group_remove_namespace","channel_group_add_channel","channel_group_cloak","set_uuid","get_uuid","uuid","auth","set_cipher_key","get_cipher_key","raw_encrypt","raw_decrypt","set_heartbeat","get_heartbeat","set_heartbeat_interval","get_heartbeat_interval"],
common_callbacks_to_wrap:["callback","error"],subscribe_callbacks_to_wrap:["callback","connect","reconnect","disconnect","error","idle","presence"]
},j={},k={};for(j.init=function(a){return j.getInstance(i.default_instance_name).init(a);

},j.getInstance=function(a){var d=k[a];return c(d)?d:"string"==typeof a&&a.length>0?(k[a]=new b(a),
k[a]):d},j.getEventNameFor=function(a,b,c){return c||(c=i.default_instance_name),
[i.pubnub_prefix,c,a,b].join(":")},j.getMessageEventNameFor=function(a,b){return b||(b=i.default_instance_name),
[i.pubnub_prefix,b,"subscribe","callback",a].join(":")},j.getPresenceEventNameFor=function(a,b){
return b||(b=i.default_instance_name),[i.pubnub_prefix,b,"subscribe","presence",a].join(":");

},j.subscribe=function(a){this.getInstance(i.default_instance_name).subscribe(a)},
b.prototype.getLabel=function(){return this.label},h=0;h<i.methods_to_delegate.length;h++)!function(a){
b.prototype[a]=function(b){return d(b)&&g(this.getLabel(),a,b,f(b,i.common_callbacks_to_wrap)),
this.getOriginalInstance()[a](b)},j[a]=function(b){return this.getInstance(i.default_instance_name)[a](b);

}}(i.methods_to_delegate[h]);return b.prototype.subscribe=function(a){g(this.getLabel(),"subscribe",a,f(a,i.subscribe_callbacks_to_wrap)),
this.getOriginalInstance().subscribe(a)},b.prototype.init=function(a){this.pubnubInstance=new PUBNUB.init(a);

},b.prototype.getOriginalInstance=function(){if(this.pubnubInstance)return this.pubnubInstance;

throw new ReferenceError("Pubnub default instance is not initialized yet. Invoke #init() method first.");

},j}]);
//# sourceMappingURL=pubnub-angular.min.js.map