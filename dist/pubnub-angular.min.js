angular.module("pubnub.angular.service",[]).factory("Pubnub",["$rootScope",function(a){function b(a){this.label=a,this.pubnubInstance=null;
}function c(a,b){var c,d,e,f=a.triggerEvents,g=[];if(f===!0)return b;if(angular.isObject(f)){for(c=f.length,e=0;c>e;e++)d=f[e],
b.indexOf(d)>=0&&g.push(d);return g}return[]}function d(b,c,d,e){var f,h,i=e.length,j={};for(h=0;i>h;h++){if(f=e[h],!angular.isObject(d))return;
j[f]=d[f],function(e){d[f]=function(){if(a.$broadcast.bind.apply(a.$broadcast,[a,g.getEventNameFor(c,e,b)].concat(Array.prototype.slice.call(arguments)))(),
e in j&&angular.isFunction(j[e])&&j[e].apply(null,arguments),"subscribe"===c)switch(e){case"callback":a.$broadcast.bind.apply(a.$broadcast,[a,g.getMessageEventNameFor(arguments[2],b)].concat(Array.prototype.slice.call(arguments)))();
break;case"presence":a.$broadcast.bind.apply(a.$broadcast,[a,g.getPresenceEventNameFor(arguments[2],b)].concat(Array.prototype.slice.call(arguments)))();
}}}(f)}}if(!angular.isDefined(PUBNUB))throw new Error("PUBNUB is not in global scope. Ensure that pubnub.js file is included before pubnub-angular.js");
var e,f={pubnub_prefix:"pubnub",default_instance_name:"default",methods_to_delegate:["history","replay","publish","unsubscribe","here_now","grant","revoke","audit","time","where_now","state","channel_group","channel_group_list_channels","channel_group_list_groups","channel_group_list_namespaces","channel_group_remove_channel","channel_group_remove_group","channel_group_remove_namespace","channel_group_add_channel","channel_group_cloak","set_uuid","get_uuid","uuid","auth","set_cipher_key","get_cipher_key","raw_encrypt","raw_decrypt","set_heartbeat","get_heartbeat","set_heartbeat_interval","get_heartbeat_interval"],
common_callbacks_to_wrap:["callback","error"],subscribe_callbacks_to_wrap:["callback","connect","reconnect","disconnect","error","idle","presence"]
},g={},h={};for(g.init=function(a){return g.getInstance(f.default_instance_name).init(a)},g.getInstance=function(a){var c=h[a];
return angular.isDefined(c)&&c instanceof b?c:"string"==typeof a&&a.length>0?(h[a]=new b(a),h[a]):c},g.getEventNameFor=function(a,b,c){
return c||(c=f.default_instance_name),[f.pubnub_prefix,c,a,b].join(":")},g.getMessageEventNameFor=function(a,b){return b||(b=f.default_instance_name),
[f.pubnub_prefix,b,"subscribe","callback",a].join(":")},g.getPresenceEventNameFor=function(a,b){return b||(b=f.default_instance_name),
[f.pubnub_prefix,b,"subscribe","presence",a].join(":")},g.subscribe=function(a){this.getInstance(f.default_instance_name).subscribe(a);
},b.prototype.getLabel=function(){return this.label},e=0;e<f.methods_to_delegate.length;e++)!function(a){b.prototype[a]=function(b){
return angular.isObject(b)&&d(this.getLabel(),a,b,c(b,f.common_callbacks_to_wrap)),this.getOriginalInstance()[a](b)},g[a]=function(b){
return this.getInstance(f.default_instance_name)[a](b)}}(f.methods_to_delegate[e]);return b.prototype.subscribe=function(a){
d(this.getLabel(),"subscribe",a,c(a,f.subscribe_callbacks_to_wrap)),this.getOriginalInstance().subscribe(a)},b.prototype.init=function(a){
this.pubnubInstance=new PUBNUB.init(a)},b.prototype.getOriginalInstance=function(){if(this.pubnubInstance)return this.pubnubInstance;
throw new ReferenceError("Pubnub default instance is not initialized yet. Invoke #init() method first.")},g}]);
//# sourceMappingURL=pubnub-angular.min.js.map